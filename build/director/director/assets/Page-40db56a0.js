import{_ as v,J as O,a as w,P as U,w as B,D as j}from"./app-6b9a8a6e.js";import{_ as x,D as A}from"./director-5dc358cf.js";import{o as m,u as y,v as a,x as c,y as l,z as _,A as P,B as S,C as V,D as $,F as I,E as N,S as k,G as D,H as J,I as L,J as R,K as r,N as z,O as F,P as T}from"./runtime-core.esm-bundler-a986a76e.js";import{h as g}from"./index.m-4059d5ca.js";const G=["id","data-name"],H=m({__name:"NavItem",props:{element:null},async setup(e){let n,t,s=null;return e.element.typeName!=="Element"&&(s=([n,t]=y(()=>x(()=>import(e.element.componentUrl),[])),n=await n,t(),n)),(d,o)=>(a(),c("li",{class:V(["nav-item",e.element.classes]),id:"settings-menu-"+e.element.name.replace(".","-"),"data-name":e.element.name},[l(s)?(a(),_(P(l(s).default),{key:0,element:e.element},null,8,["element"])):S("",!0)],10,G))}});const K=v(H,[["__scopeId","data-v-81e56908"]]),M={class:"nav nav-pills flex-column mb-auto"},q=m({__name:"Nav",props:{settings:null},setup(e){A.registerComponents(Object.assign({}));const n=[];for(const t of Object.values(e.settings.children))t.hasOwnProperty("isPage")&&t.isPage&&n.push(t);return O.on("navigate",()=>{const t=g().params;for(const s of n){if((s.slug==="index"||!s.slug?void 0:s.slug)===t.slug){s.active=!0;continue}s.active=!1}}),(t,s)=>(a(),c("ul",M,[(a(),_(k,null,{default:$(()=>[(a(!0),c(I,null,N(e.settings.children,(d,o)=>(a(),_(K,{element:d,key:o},null,8,["element"]))),128))]),_:1}))]))}}),C=e=>(L("data-v-ccf8b6dd"),e=e(),R(),e),Q={class:"sidebar d-flex flex-column flex-shrink-0 p-3 text-white bg-dark",style:{width:"280px"}},W=C(()=>r("a",{href:"/admin/",class:"d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none"},[r("span",{class:"fs-4"},"Director")],-1)),X=C(()=>r("hr",null,null,-1)),Y=J('<hr data-v-ccf8b6dd><div class="dropdown" data-v-ccf8b6dd><a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false" data-v-ccf8b6dd><img src="https://github.com/mdo.png" alt="" width="32" height="32" class="rounded-circle me-2" data-v-ccf8b6dd><strong data-v-ccf8b6dd>mdo</strong></a><ul class="dropdown-menu dropdown-menu-dark text-small shadow" aria-labelledby="dropdownUser1" data-v-ccf8b6dd><li data-v-ccf8b6dd><a class="dropdown-item" href="#" data-v-ccf8b6dd>New project...</a></li><li data-v-ccf8b6dd><a class="dropdown-item" href="#" data-v-ccf8b6dd>Settings</a></li><li data-v-ccf8b6dd><a class="dropdown-item" href="#" data-v-ccf8b6dd>Profile</a></li><li data-v-ccf8b6dd><hr class="dropdown-divider" data-v-ccf8b6dd></li><li data-v-ccf8b6dd><a class="dropdown-item" href="#" data-v-ccf8b6dd>Sign out</a></li></ul></div>',2),Z=m({__name:"Sidebar",setup(e){let t=(w().props??{settings:{}}).settings;return(s,d)=>(a(),c("div",Q,[W,X,D(q,{settings:l(t)},null,8,["settings"]),Y]))}});const ee=v(Z,[["__scopeId","data-v-ccf8b6dd"]]),te={class:"layout-settings"},se={class:"row h-100 g-0"},ae={class:"col content"},ne=m({__name:"Settings",setup(e){return(n,t)=>(a(),c("div",te,[r("div",se,[D(ee),r("div",ae,[z(n.$slots,"default",{},void 0,!0)])])]))}});const le=v(ne,[["__scopeId","data-v-377ef474"]]),de=["id","data-name"],oe=m({__name:"SettingsItem",props:{element:null,modelValue:null},emits:["update:modelValue"],async setup(e,{emit:n}){let t,s,d=null;e.element.typeName!=="Element"&&(d=([t,s]=y(()=>x(()=>import(e.element.componentUrl),[])),t=await t,s(),t));const o=F({get(){return e.modelValue},set(p){n("update:modelValue",p)}});return(p,u)=>(a(),c("div",{class:V(["settings-item",e.element.classes]),id:"settings-"+e.element.name.replace(".","-"),"data-name":e.element.name},[l(d)?(a(),_(P(l(d).default),{key:0,element:e.element,modelValue:l(o),"onUpdate:modelValue":u[0]||(u[0]=i=>T(o)?o.value=i:null)},null,8,["element","modelValue"])):S("",!0)],10,de))}}),ce={class:"p-3"},ie=r("button",{class:"btn btn-primary"},"Save",-1),re=m({layout:[j,le]}),fe=m({...re,__name:"Page",setup(e){let t=(w().props??{settings:{}}).settings,s=g().params,d=s.slug?s.slug:"index",o={};for(const i of Object.values(t.children))i.hasOwnProperty("isPage")&&i.isPage&&(o[i.slug]=i);let p=o[d],u=U({settings:{}});return(i,h)=>(a(),c("div",ce,[r("form",{onSubmit:h[0]||(h[0]=B(b=>l(u).post(l(g)("director.settings.save",{slug:l(d)})),["prevent"]))},[(a(),_(k,null,{default:$(()=>[(a(!0),c(I,null,N(l(p).children,(b,f)=>(a(),_(oe,{element:b,key:f,modelValue:l(u).settings[f],"onUpdate:modelValue":E=>l(u).settings[f]=E},null,8,["element","modelValue","onUpdate:modelValue"]))),128))]),_:1})),ie],32)]))}});export{fe as default};
